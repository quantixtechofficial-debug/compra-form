<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Compra de Guitarra — Tienda</title>
  <style>
    :root{
      --yellow-1:#fff7e6;
      --yellow-2:#ffd66b;
      --accent:#b96b00;
      --muted:#6b593f;
      --card-shadow: 0 8px 30px rgba(34,34,34,0.08);
      --radius:14px;
      font-family: Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial;
    }
    html,body{height:100%;margin:0;background:linear-gradient(180deg,var(--yellow-1),#fff);}
    .container{max-width:920px;margin:32px auto;padding:28px;background:linear-gradient(180deg,#fff,#fffaf0);border-radius:18px;box-shadow:var(--card-shadow);display:grid;grid-template-columns:1fr 360px;gap:24px}
    header{grid-column:1/-1;display:flex;align-items:center;gap:16px}
    .logo{width:68px;height:68px;border-radius:12px;background:linear-gradient(135deg,var(--yellow-2),#ffc145);display:flex;align-items:center;justify-content:center;box-shadow:0 6px 18px rgba(185,107,0,0.14)}
    .logo svg{width:40px;height:40px;transform:translateY(-2px)}
    h1{margin:0;font-size:20px;color:var(--muted)}
    p.lead{margin:4px 0 0;color:#826744;font-size:13px}

    form{display:flex;flex-direction:column;gap:12px}
    label{font-size:13px;color:#4b3a2a}
    input[type=text],input[type=email],input[type=tel],select,textarea,input[type=number]{
      width:100%;padding:10px 12px;border-radius:10px;border:1px solid rgba(106,84,60,0.12);background:linear-gradient(180deg,#fff,#fffef7);font-size:14px;box-sizing:border-box;transition:box-shadow .18s, transform .12s;
    }
    input:focus,select:focus,textarea:focus{outline:none;box-shadow:0 6px 18px rgba(185,107,0,0.08);transform:translateY(-1px)}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    .card{padding:14px;border-radius:12px;background:linear-gradient(180deg,#fff,#fffef8);border:1px solid rgba(0,0,0,0.03)}

    .summary h3{margin:0 0 6px 0;color:var(--muted)}
    .summary p{margin:0;color:#6b5a49;font-size:14px}

    .btn{appearance:none;border:0;padding:12px 16px;border-radius:12px;background:linear-gradient(90deg,var(--yellow-2),#ffbf3a);box-shadow:0 8px 20px rgba(185,107,0,0.12);font-weight:700;color:#3b2300;cursor:pointer;font-size:15px}
    .btn:active{transform:translateY(1px)}

    .soft-glow{position:relative}
    .soft-glow::after{content:"";position:absolute;inset:-8px;border-radius:16px;filter:blur(22px);background:radial-gradient(circle at 20% 20%, rgba(255,214,120,0.24), rgba(255,173,40,0.06));z-index:-1}

    footer.small{grid-column:1/-1;text-align:center;color:#8b6f49;font-size:13px;margin-top:6px}

    /* small screens */
    @media (max-width:880px){
      .container{grid-template-columns:1fr;padding:18px}
      .row{grid-template-columns:1fr}
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo" aria-hidden>
        <!-- simple guitar icon -->
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M20.5 3.5l-3 3 1.5 1.5 3-3L20.5 3.5zM15.2 8.8l-7.6 7.6a3.5 3.5 0 0 0-.9 1.6L6 20l2.9-.8c.6-.2 1.2-.5 1.6-.9l7.6-7.6-3-3z" fill="#7a4d00"/></svg>
      </div>
      <div>
        <h1>Compra rápida — Quantix Guitar</h1>
        <p class="lead">Rellena los datos, elige modelo y método de pago. Te enviaremos confirmación al correo.</p>
      </div>
    </header>

    <main>
      <form id="purchaseForm" class="soft-glow" autocomplete="on">
        <!-- Nota: reemplaza ACTION_URL en el script por tu URL de Google Apps Script o endpoint -->

        <div class="row">
          <div>
            <label for="fullname">Nombre completo</label>
            <input id="fullname" name="fullname" type="text" required placeholder="Ej. Juan Pérez" />
          </div>
          <div>
            <label for="email">Correo electrónico</label>
            <input id="email" name="email" type="email" required placeholder="tu@correo.com" />
          </div>
        </div>

        <div class="row">
          <div>
            <label for="phone">Teléfono</label>
            <input id="phone" name="phone" type="tel" placeholder="+52 55 1234 5678" />
          </div>
          <div>
            <label for="quantity">Cantidad</label>
            <input id="quantity" name="quantity" type="number" min="1" value="1" required />
          </div>
        </div>

        <label for="model">Modelo de guitarra</label>
        <select id="model" name="model" required>
          <option value="">Selecciona un producto</option>
          <option value="donner" data-price="1300" data-img="guitarblack.png">Guitarra eléctrica Donner DST-100</option>
          <option value="squiern" data-price="2697" data-img="URL_SQUIERN" src="guitarblack.png">Guitarra eléctrica Fender Squier Debut - Negra</option>
          <option value="squierr" data-price="2640" data-img="URL_TELE">Guitarra eléctrica Fender Squier Debut - Roja</option>
          <option value="squierc" data-price="2879" data-img="URL_FOLK">Guitarra eléctrica Fender Squier Debut - Café</option>
          <option value="frontman" data-price="2190" data-img="URL_EA">Amplificador Fender Frontman 20G</option>
          <option value="leojaymz" data-price="1159" data-img="URL_EA">Amplificador Leo Jaymz</option>
          <option value="spark" data-price="4371" data-img="URL_EA">Amplificador Positive Grid Spark Mini</option>
          <option value="ernie" data-price="109" data-img="URL_EA">Plumilla Ernie Ball Everlast</option>
          <option value="tortex" data-price="176" data-img="URL_EA">Plumilla Dunlop Tortex Pitch Black Jazz III</option>
          <option value="jimdunlop" data-price="154" data-img="URL_EA">Plumilla Jim Dunlop</option>
        </select>

        <div class="card" style="margin:12px 0">
          <h3 style="margin:0 0 6px;color:#6b5a49">Imagen del modelo</h3>
          <img id="modelPreview" src="guitarblack.png" alt="Modelo" style="width:100%;border-radius:12px;display:none">
        </div>

        <div class="card" style="margin:12px 0">
          <h3 style="margin:0 0 6px;color:#6b5a49">Precio</h3>
          <p id="priceDisplay" style="font-size:20px;color:#b96b00;font-weight:700">$0 MXN</p>
          <p id="totalDisplay" style="font-size:16px;color:#7a5a28;margin-top:6px">Total: $0 MXN</p>
        </div>

        <div class="row">
          <div>
            <label for="shipping">Envío</label>
            <select id="shipping" name="shipping">
              <option value="tienda">Recoger en tienda</option>
              <option value="express">Envío por paquetería gratis (1 - 3 días)</option>
            </select>
          </div>
        </div>

        

        <div class="row" style="align-items:center">
          <div>
            <label for="payment">Método de pago</label>
            <select id="payment" name="payment" required>
              <option value="">Selecciona</option>
              <option value="transfer">Transferencia / SPEI</option>
              <option value="card">Tarjeta de crédito o débito</option>
              <option value="cash">Efectivo</option>
            </select>
          </div>
          <div style="display:flex;align-items:flex-end;">
            <button type="submit" class="btn" id="submitBtn">Enviar pedido</button>
          </div>
        </div>

        <input type="hidden" name="source" value="sitio-google" />
      </form>
    </main>


  <script>
    // --- CONFIG ---
    // Reemplaza por la URL de tu Google Apps Script (Web App) o endpoint que procese el pedido.
    const ACTION_URL = 'https://script.google.com/macros/s/REPLACE_YOUR_SCRIPT_ID/exec';

    const form = document.getElementById('purchaseForm');
    const submitBtn = document.getElementById('submitBtn');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      submitBtn.disabled = true;submitBtn.textContent = 'Enviando...';

      const data = new FormData(form);
      try{
        // Envío como POST al endpoint. Ajusta según lo que tu script espere (JSON o form-data).
        const resp = await fetch(ACTION_URL, {
          method: 'POST',
          body: data
        });

        if(!resp.ok) throw new Error('Error en el servidor: '+resp.status);

        // Intentamos leer respuesta JSON o texto
        let text = '';
        try{ text = await resp.text(); }catch(e){ text = 'Pedido enviado.' }

        alert('Pedido enviado correctamente.\n' + text);
        form.reset();
      }catch(err){
        console.error(err);
        alert('No se pudo enviar el pedido. Revisa la consola y la URL de ACTION_URL.');
      }finally{
        submitBtn.disabled = false;submitBtn.textContent = 'Enviar pedido';
      }
    });
  
    // --- Lógica: precio e imagen ---
    const modelSelect = document.getElementById('model');
    const priceDisplay = document.getElementById('priceDisplay');
    const preview = document.getElementById('modelPreview');

    const quantityInput = document.getElementById('quantity');

    function updatePrice(){
      const opt = modelSelect.selectedOptions[0];
      if (!opt) return;

      const price = Number(opt.dataset.price || 0);
      const qty = Number(quantityInput.value || 1);
      const img = opt.dataset.img || '';

      const total = price * qty;

      priceDisplay.textContent = `$${price} MXN (c/u)`;
      totalDisplay.textContent = `Total: $${total} MXN`;

      if (img){ preview.src = img; preview.style.display = 'block'; }
      else{ preview.style.display = 'none'; }
    }

    modelSelect.addEventListener('change', updatePrice);
    quantityInput.addEventListener('input', updatePrice);('change', () => {
      const opt = modelSelect.selectedOptions[0];
      if (!opt) return;

      const price = opt.dataset.price || 0;
      const img = opt.dataset.img || '';

      priceDisplay.textContent = `$${price} MXN`;

      if (img) {
        preview.src = img;
        preview.style.display = 'block';
      } else {
        preview.style.display = 'none';
      }
    });

    // --- Selección basada en URL ---
const params = new URLSearchParams(window.location.search);
const productoParam = params.get("producto");

if(productoParam){
  modelSelect.value = productoParam;
  updatePrice();
}


  </script>
</body>
</html>

